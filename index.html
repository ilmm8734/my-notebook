<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ú–æ–π –ë–ª–æ–∫–Ω–æ—Ç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

body {
    font-family: 'Poppins', sans-serif;
    background-color: #f9f9f9;
    margin: 0;
    padding: 0;
    transition: background 0.3s, color 0.3s;
}

body.dark {
    background-color: #121212;
    color: #e0e0e0;
}

/* –ì–ª–∞–≤–Ω—ã–π –±–ª–æ–∫–Ω–æ—Ç */
#mainContent { filter: none; transition: filter 0.3s; }

header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background-color: white;
    border-bottom: 1px solid #ff4d4d;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    transition: background 0.3s, border-color 0.3s;
}

body.dark header {
    background-color: #1e1e1e;
    border-color: #ff6b6b;
}

h1 { color: #ff4d4d; margin: 0; font-weight: 600; }

button {
    background: none;
    border: 1px solid #ff4d4d;
    color: #ff4d4d;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
}

body.dark button { border-color: #ff6b6b; color: #ff6b6b; }

button:hover { background-color: #ffe6e6; transform: scale(1.05); }
body.dark button:hover { background-color: #330000; }

input#search {
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid #ff4d4d;
    margin-right: 10px;
    transition: all 0.3s;
}

body.dark input#search { border-color: #ff6b6b; background-color: #1e1e1e; color: #e0e0e0; }

.notes-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 15px;
    padding: 20px;
}

.note {
    background: white;
    border: 1px solid #ff4d4d;
    border-radius: 8px;
    padding: 15px;
    position: relative;
    box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    cursor: pointer;
    overflow: hidden;
    transition: all 0.3s ease, transform 0.3s ease, opacity 0.3s ease;
}

body.dark .note { background: #1e1e1e; border-color: #ff6b6b; color: #e0e0e0; }

.note h3 { margin:0; font-weight:600; color:#ff4d4d; }
body.dark .note h3 { color:#ff6b6b; }

.note p { margin:5px 0 0 0; color:inherit; }

.fullscreen {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: white;
    border: 1px solid #ff4d4d;
    z-index: 1000;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    transition: background 0.3s, color 0.3s;
    box-sizing: border-box;
}

body.dark .fullscreen { background: #1e1e1e; border-color: #ff6b6b; color:#e0e0e0; }

.fullscreen h3, .fullscreen p { outline:none; }
.fullscreen h3 { font-size:1.8em; color:#ff4d4d; }
body.dark .fullscreen h3 { color:#ff6b6b; }
.fullscreen p { flex-grow:1; margin-top:10px; line-height:1.4em; white-space: pre-wrap; }

.close-btn, .delete-btn, .download-btn {
    margin:5px 5px 5px 0;
    padding:6px 12px;
    border-radius:6px;
    border:1px solid #ff4d4d;
    background:none;
    color:#ff4d4d;
    cursor:pointer;
    font-size:14px;
    transition:all 0.3s;
}

body.dark .close-btn, body.dark .delete-btn, body.dark .download-btn {
    border-color:#ff6b6b; color:#ff6b6b;
}

.close-btn:hover, .delete-btn:hover, .download-btn:hover { background-color:#ffe6e6; }
body.dark .close-btn:hover, body.dark .delete-btn:hover, body.dark .download-btn:hover { background-color:#330000; }

#notification {
    position: fixed;
    bottom: 20px;
    left:50%;
    transform: translateX(-50%);
    background: #ff4d4d;
    color:white;
    padding:8px 15px;
    border-radius:6px;
    opacity:0;
    pointer-events:none;
    transition: opacity 0.5s;
}

body.dark #notification { background:#ff6b6b; }

/* –ü–∞—Ä–æ–ª—å */
#passwordOverlay {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.5);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:2000;
}

#passwordBox {
    background: white;
    padding:30px;
    border-radius:10px;
    box-shadow:0 5px 20px rgba(0,0,0,0.3);
    display:flex;
    flex-direction:column;
    align-items:center;
    width:90%;
    max-width:350px;
}

body.dark #passwordBox { background:#1e1e1e; color:#e0e0e0; }

#passwordBox input {
    padding:8px 12px;
    border-radius:6px;
    border:1px solid #ff4d4d;
    margin-bottom:15px;
    width:100%;
    font-size:16px;
}

body.dark #passwordBox input { border-color:#ff6b6b; background:#121212; color:#e0e0e0; }

#passwordBox button { width:100%; }
@media (max-width:500px) {
    .notes-container { grid-template-columns:1fr; padding:10px; }
    header { flex-direction: column; align-items: flex-start; gap: 10px; }
    #passwordBox { padding:20px; }
}
</style>
</head>
<body>

<div id="passwordOverlay">
    <div id="passwordBox">
        <h2>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</h2>
        <input type="password" id="sitePassword" placeholder="–ü–∞—Ä–æ–ª—å">
        <button onclick="checkPassword()">–í–æ–π—Ç–∏</button>
    </div>
</div>

<div id="mainContent">
<header>
    <h1>–ú–æ–π –ë–ª–æ–∫–Ω–æ—Ç</h1>
    <div class="header-controls">
        <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –∑–∞–º–µ—Ç–æ–∫..." oninput="renderNotes()">
        <button onclick="addNote()">Ôºã –ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</button>
        <button onclick="clearAllNotes()">üóë –û—á–∏—Å—Ç–∏—Ç—å –±–ª–æ–∫–Ω–æ—Ç</button>
        <button onclick="toggleDarkMode()">üåì –¢–µ–º–∞</button>
    </div>
</header>

<div class="notes-container" id="notesContainer"></div>
<div id="fullscreenContainer" style="display:none;"></div>
<div id="notification"></div>
</div>

<script>
// –ü–∞—Ä–æ–ª—å
function checkPassword(){
    const val=document.getElementById('sitePassword').value;
    if(val==='87653421'){
        document.getElementById('passwordOverlay').style.display='none';
        document.getElementById('mainContent').style.filter='none';
    }else{
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
let notes = JSON.parse(localStorage.getItem('notes')) || [];
let darkMode = JSON.parse(localStorage.getItem('darkMode')) || false;
if(darkMode) document.body.classList.add('dark');
let saveTimeout = null;

// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
function showNotification(text) {
    const notif = document.getElementById('notification');
    notif.innerText = text;
    notif.style.opacity = 1;
    setTimeout(()=>{notif.style.opacity=0}, 1500);
}

// –†–µ–Ω–¥–µ—Ä –∑–∞–º–µ—Ç–æ–∫
function renderNotes() {
    const container = document.getElementById('notesContainer');
    container.innerHTML='';
    const query = document.getElementById('search').value.toLowerCase();
    notes.forEach((note,index)=>{
        if(note.title.toLowerCase().includes(query) || note.text.toLowerCase().includes(query)) {
            const noteElem=document.createElement('div');
            noteElem.className='note';
            noteElem.style.opacity=0;
            noteElem.style.transform='scale(0.95)';
            noteElem.innerHTML=`<h3>${note.title}</h3><p>${note.text.substring(0,50)}...</p>`;
            noteElem.onclick=()=>openFullscreen(index);
            container.appendChild(noteElem);
            setTimeout(()=>{noteElem.style.opacity=1; noteElem.style.transform='scale(1)';},50);
        }
    });
    localStorage.setItem('notes',JSON.stringify(notes));
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
function addNote() {
    notes.push({title:'–ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞',text:'–¢–µ–∫—Å—Ç...'});
    renderNotes();
    showNotification('–ó–∞–º–µ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞');
}

// –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫
function clearAllNotes(){
    if(confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏?')){
        notes=[];
        renderNotes();
        showNotification('–í—Å–µ –∑–∞–º–µ—Ç–∫–∏ —É–¥–∞–ª–µ–Ω—ã');
    }
}

// –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
function openFullscreen(index){
    const container=document.getElementById('fullscreenContainer');
    container.style.display='flex';
    container.className='fullscreen';
    container.innerHTML=`
        <div style="display:flex; justify-content:flex-end; gap:5px; flex-wrap:wrap; margin-bottom:10px;">
            <button class="close-btn" onclick="closeFullscreen()">‚úñ –ó–∞–∫—Ä—ã—Ç—å</button>
            <button class="download-btn" onclick="downloadNote(${index})">üíæ –°–∫–∞—á–∞—Ç—å</button>
            <button class="delete-btn" onclick="deleteNote(${index})">üóë –£–¥–∞–ª–∏—Ç—å</button>
        </div>
        <h3 contenteditable="true" id="fsTitle">${notes[index].title}</h3>
        <p contenteditable="true" id="fsText">${notes[index].text}</p>
    `;
    const fsTitle=document.getElementById('fsTitle');
    const fsText=document.getElementById('fsText');

    function save() {
        notes[index].title=fsTitle.innerText;
        notes[index].text=fsText.innerText;
        localStorage.setItem('notes',JSON.stringify(notes));
        renderNotes();
        showNotification('–ó–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
    }

    fsTitle.oninput=fsText.oninput=(e)=>{
        if(saveTimeout) clearTimeout(saveTimeout);
        saveTimeout=setTimeout(save, 1000); // –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    };
}

// –ó–∞–∫—Ä—ã—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
function closeFullscreen(){
    document.getElementById('fullscreenContainer').style.display='none';
}

// –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
function deleteNote(index){
    if(confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–º–µ—Ç–∫—É?')){
        notes.splice(index,1);
        renderNotes();
        closeFullscreen();
        showNotification('–ó–∞–º–µ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∞');
    }
}

// –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
function toggleDarkMode(){
    document.body.classList.toggle('dark');
    darkMode=document.body.classList.contains('dark');
    localStorage.setItem('darkMode',JSON.stringify(darkMode));
}

// –°–∫–∞—á–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
function downloadNote(index){
    const element=document.createElement('a');
    const file=new Blob([notes[index].title+'\n\n'+notes[index].text],{type:'text/plain'});
    element.href=URL.createObjectURL(file);
    element.download=`${notes[index].title}.txt`;
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
}

renderNotes();
</script>
</body>
</html>
